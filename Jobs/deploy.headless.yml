parameters:
  ResourceGroupName:
  AzureServiceConnection: 
  SubscriptionId: 
  Location:
  ParameterFile:

steps:
- template: ../Tasks/deploy.arm.yml
  parameters:
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: ../Templates/servicePlans.json
    ParameterFile: ../Parameters/${{ parameters.ParameterFile }}

- template: ../Tasks/deploy.arm.yml
  parameters:
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/webApps.json
    ParameterFile: ${{ parameters.ParameterFile }}

- template: ../Tasks/deploy.arm.yml
  parameters:
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/slots.json
    ParameterFile: ${{ parameters.ParameterFile }}