parameters:
  ResourceGroupName:
  AzureServiceConnection: 
  SubscriptionId: 
  Location:
  ParameterFile:

steps:
- template: ../Tasks/deploy.arm.yml
  displayName: 'Deploy Resource Group'
  parameters:
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/Templates/resourceGroup.json
    ParameterFile: ${{ parameters.ParameterFile }}
    
- template: ../Tasks/deploy.arm.yml
  parameters:
    displayName: 'Deploy Service Plans'
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/Templates/servicePlans.json
    ParameterFile: ${{ parameters.ParameterFile }}

- template: ../Tasks/deploy.arm.yml
  parameters:
    displayName: 'Deploy WebApps'
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/Templates/webApps.json
    ParameterFile: ${{ parameters.ParameterFile }}

- template: ../Tasks/deploy.arm.yml
  parameters:
    displayName: 'Deploy Slots'
    ResourceGroupName: ${{ parameters.ResourceGroupName }}
    AzureServiceConnection: ${{ parameters.AzureServiceConnection }}
    SubscriptionId: ${{ parameters.SubscriptionId }}
    Location: ${{ parameters.Location }}
    Template: $(Build.SourcesDirectory)/Templates/slots.json
    ParameterFile: ${{ parameters.ParameterFile }}
